---
title: "小站诞生手记"
date: "2019-02-13"
cover: "01cover.jpg"
summary: "本文介绍此个人网站主要的技术栈和技术思路。"
---

# 小站诞生手记

![image](01cover.jpg)

## 功能分析

1. 使用markdown格式书写文章
2. 将文章信息分类展示
3. 将文章信息按年限展示
4. 将文章展示

## 技术栈

1. 编程语言语言 ES6
2. 视图层框架 react
3. 状态管理工具 redux
4. 工程化打包工具 webpack
5. 后台框架 koa
6. 数据存储 mongodb

## 项目构思

### 文章存储

- 文章按照类型，分目录进行存

```dir
  blog
  ├── type1
  │   ├── article1.md
  │   ├── article2.md
  │   └── article3.md
  ├── type2
  │   ├── article1.md
  │   ├── article2.md
  │   └── article3.md
  └── type3
      ├── article1.md
      ├── article2.md
      └── article3.md
```

- 文章开头存储文章头信息，利用特殊标识与内容分离

```html
    title: "XXXXX"
    date: "XXXX-X-XX"
    cover: "XXXX.jpg"
    summary: "XXXXXXXXXXXXXXXXXXXXXXXX"
```

### 前端职责分析

1. 当用户进入`blog`路由时，利用`ajax`,获取全部文章信息，在`store`中分类存储
2. 当用户切换路由(`前端路由`)时，页面内容根据`store`中内容进行分类展示
3. 当用户点击文章时，利用`a标签`跳转到经服务端渲染好的文章页面

### 服务端职责分析

1. 服务器启动时，遍历blog文件夹，提取所有文章头信息，并存储到数据库中
2. 前端利用`ajax`，获取数据库中文章信息
3. 当前端请求特定url（`文章内容`）时,根据文章类型和名称在服务器读取特定的文章内容，并进行提取,结合模板引擎渲染成html字符串返还给前端`/blog/:type/:articlename.md`
  

以上就是功能的分析，和用户交互部分比较单一，所以分析起来也比较简单。 
算是一个典型的前后端分离项目，后端提供数据接口，前端利用ajax异步进行数据获取渲染页面。
唯一一个前后端耦合的部分便是文章的展示。为什么要将文章渲染放在后端来做呢？一方面是因为实现简单，另一方面则是考虑这样可以很好的解决首屏渲染问题，让用户可以更快的看到文章内容页。